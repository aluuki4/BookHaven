<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="description" content="Книжковий магазин 'BookHeaven' пропонує широкий вибір книг за доступними цінами. Доставка по Україні.">
    <meta name="keywords" content="книги, література, онлайн-магазин, доставка, акції, жанри">
    <meta name="author" content="BookHeaven">
    <title>Книжковий магазин "BookHeaven"</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://unpkg.com/swiper/swiper-bundle.min.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #D97706;
            --secondary: #4A7043;
            --background: #F8F1E9;
            --text: #2D3748;
            --white: #FFFFFF;
            --gray-200: #E5E7EB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --transition: 0.3s ease;
        }

        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--background);
            color: var(--text);
            overflow-x: hidden;
            font-size: 16px;
            line-height: 1.5;
        }

        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            letter-spacing: 0.02em;
        }

        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }

        .btn,
        .book-card button,
        .auth-form button {
            background: var(--primary);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            transition: all var(--transition);
        }

        .btn:hover,
        .book-card button:hover,
        .auth-form button:hover {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            transform: scale(1.05);
        }

        .book-card {
            width: 100%;
            max-width: 250px;
            border-radius: 10px;
            background: var(--white);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
            transition: transform var(--transition), box-shadow var(--transition);
            cursor: move;
        }

        .book-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 28px rgba(0, 0, 0, 0.12);
        }

        .book-card.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .book-card img {
            border-radius: 6px;
            object-fit: cover;
            width: 100%;
            height: 220px;
        }

        .nav-link {
            position: relative;
            font-weight: 600;
            font-size: 1rem;
            transition: color var(--transition);
        }

        .nav-link:hover { color: var(--primary); }

        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: var(--primary);
            transition: width var(--transition);
        }

        .nav-link:hover::after { width: 100%; }

        .search-bar,
        .auth-form input {
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            font-size: 1rem;
            width: 100%;
            transition: all var(--transition);
        }

        .search-bar:focus,
        .auth-form input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.2);
        }

        .hero-section {
            background: url('https://images.unsplash.com/photo-1524995997946-a1c2e315a42f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80') center/cover fixed no-repeat;
            position: relative;
            min-height: 600px;
            display: flex;
            align-items: center;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.4);
        }

        .modal,
        .mobile-menu,
        .auth-overlay {
            position: fixed;
            z-index: 9999;
            transition: all var(--transition);
        }

        .modal,
        .mobile-menu {
            opacity: 0;
            transform: scale(0.95);
        }

        .modal.show,
        .modal.opacity-100 {
            opacity: 1;
            transform: scale(1);
        }

        .mobile-menu {
            transform: translateX(100%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(8px);
        }

        .mobile-menu.open {
            transform: translateX(0);
            opacity: 1;
        }


        .toast-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toast {
            background: var(--white);
            color: var(--text);
            padding: 1rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            min-width: 300px;
            max-width: 400px;
            transform: translateX(120%);
            transition: transform var(--transition);
        }

        .toast.show { transform: translateX(0); }
        .toast-success { border-left: 4px solid #10B981; }
        .toast-error { border-left: 4px solid #EF4444; }

        .toast-icon {
            flex-shrink: 0;
            width: 1.5rem;
            height: 1.5rem;
        }

        .toast-content { flex-grow: 1; }

        .toast-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .toast-message {
            font-size: 0.875rem;
            color: var(--gray-500);
        }

        .toast-close {
            color: var(--gray-400);
            cursor: pointer;
            padding: 0.25rem;
            transition: color 0.2s ease;
        }

        .toast-close:hover { color: var(--gray-600); }


        .auth-overlay {
            inset: 0;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: flex-end;
            align-items: center;
            opacity: 0;
            visibility: hidden;
        }

        .auth-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .auth-container {
            background-color: var(--white);
            height: 100vh;
            width: 100%;
            max-width: 500px;
            transform: translateX(100%);
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            position: relative;
        }

        .auth-overlay.active .auth-container { transform: translateX(0); }

        .auth-header {
            padding: 2rem;
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: var(--white);
            z-index: 1;
        }

        .auth-close {
            background: none;
            border: none;
            color: var(--gray-500);
            cursor: pointer;
            padding: 0.5rem;
            transition: color 0.2s ease;
        }

        .auth-close:hover { color: var(--text); }

        .auth-content { padding: 2rem; }

        .auth-tabs {
            display: flex;
            gap: 0;
            margin-bottom: 2rem;
            border-bottom: 2px solid var(--gray-200);
        }

        .auth-tab {
            flex: 1;
            padding: 1rem;
            cursor: pointer;
            font-weight: 500;
            color: var(--gray-500);
            position: relative;
            transition: color 0.2s ease;
            text-align: center;
        }

        .auth-tab:hover { color: var(--text); }
        .auth-tab.active { color: var(--primary); }

        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: var(--primary);
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .auth-form .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .auth-form input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            font-size: 1rem;
            transition: all var(--transition);
        }

        .auth-form input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(217, 119, 6, 0.2);
        }

        .auth-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .forgot-password {
            color: var(--primary);
            text-decoration: none;
            transition: color var(--transition);
        }

        .forgot-password:hover {
            color: var(--secondary);
            text-decoration: underline;
        }

        .auth-submit {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition);
        }

        .auth-submit:hover {
            background: var(--secondary);
            transform: translateY(-1px);
        }



        .two-factor {
            background: var(--gray-200);
            padding: 1rem;
            border-radius: 6px;
        }

        .two-factor-toggle {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--gray-400);
            transition: var(--transition);
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background-color: var(--white);
            transition: var(--transition);
            border-radius: 50%;
        }

        .toggle-switch input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }

                    @media (max-width: 640px) {
                .auth-container {
                    max-width: 100%;
                }
            }


        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-4px); }
            50% { transform: translateX(4px); }
            75% { transform: translateX(-2px); }
        }

        .shake-cart { animation: shake 0.4s ease-in-out; }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.75rem; }
            h3 { font-size: 1.25rem; }
            .book-card { max-width: 100%; }
            .swiper-slide { width: 250px; }
            .auth-window { margin: 1rem; }
        }

        @media (max-width: 640px) {
            .hero-section { min-height: 350px; }
            .search-bar { font-size: 0.8rem; }
            .toast-container {
                left: 1rem;
                right: 1rem;
            }
            .toast {
                min-width: 0;
                width: 100%;
            }
        }

        /* Success Overlay */
        .success-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .success-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .success-content {
            background: var(--white);
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            max-width: 400px;
            width: 90%;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .success-overlay.active .success-content {
            transform: translateY(0);
        }

        .success-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 1rem;
            color: #10B981;
        }

        .success-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text);
        }

        .success-message {
            color: var(--gray-600);
            margin-bottom: 1.5rem;
        }

        .success-button {
            background: var(--primary);
            color: var(--white);
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .success-button:hover {
            background: var(--secondary);
            transform: translateY(-1px);
        }

        /* Genre Section Styles */
        .genre-section {
            padding: 2rem 0;
        }

        .genre-section h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 2rem;
            font-family: 'Playfair Display', serif;
            text-align: center;
        }

        .genre-buttons {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .genre-button {
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
            background: var(--white);
            border: 1px solid var(--gray-200);
            color: var(--text);
            min-width: 120px;
        }

        .genre-button:hover {
            background: var(--gray-200);
            transform: translateY(-2px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .genre-button.active {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }

        #genre-grid {
            margin-top: 2rem;
        }

        .filter-sidebar {
            background: var(--white);
            border-radius: 12px;
            border: 1px solid var(--gray-200);
            height: fit-content;
        }

        @media (max-width: 768px) {
            .genre-section h2 {
                font-size: 2rem;
            }
            .genre-buttons {
                gap: 0.75rem;
            }
            .genre-button {
                padding: 0.5rem 1rem;
                min-width: auto;
                font-size: 0.9rem;
            }
            .filter-sidebar {
                margin-bottom: 2rem;
            }
        }

        html, body {
            /* ...existing code... */
        }

        /* --- MOBILE FIX: Prevent scrolling and fix to viewport --- */
        @media (max-width: 640px) {
            html, body {
                position: fixed;
                width: 100vw;
                height: 100vh;
                max-width: 100vw;
                max-height: 100vh;
                overflow: hidden !important;
                overscroll-behavior: none;
                touch-action: manipulation;
                -webkit-overflow-scrolling: auto;
            }
            body {
                overscroll-behavior-y: none;
                background-attachment: fixed;
            }
            #app, .container, .auth-overlay, .modal, .mobile-menu, .auth-container {
                max-width: 100vw !important;
                max-height: 100vh !important;
                overflow: auto;
            }
        }
        /* --- END MOBILE FIX --- */
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCHoj4i5nys-xnjYVrwM6XNrekyjSdsR0c",
            authDomain: "bookheaven-e18e0.firebaseapp.com",
            projectId: "bookheaven-e18e0",
            storageBucket: "bookheaven-e18e0.appspot.com",
            messagingSenderId: "1066264707281",
            appId: "1:1066264707281:web:112597449a8dddf3ea85f0"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        function toggleAuthOverlay(show = true) {
            const overlay = document.getElementById('auth-overlay');
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const resetForm = document.getElementById('reset-form');
            overlay.classList.toggle('active', show);
            if (show) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = '';
                loginForm?.reset();
                registerForm?.reset();
                resetForm?.reset();
            }
        }

        const toastSystem = {
            container: null,
            timeouts: new Map(),

            init() {
                if (!this.container) {
                    this.container = document.createElement('div');
                    this.container.className = 'toast-container';
                    document.body.appendChild(this.container);
                }
            },

            show(options) {
                this.init();
                const { type = 'success', title, message, duration = 5000 } = options;

                const toast = document.createElement('div');
                toast.className = `toast toast-${type}`;
                
                const icon = type === 'success' 
                    ? `<svg class="toast-icon" fill="none" stroke="#10B981" viewBox="0 0 24 24">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                       </svg>`
                    : `<svg class="toast-icon" fill="none" stroke="#EF4444" viewBox="0 0 24 24">
                         <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                       </svg>`;

                toast.innerHTML = `
                    ${icon}
                    <div class="toast-content">
                        <div class="toast-title">${title}</div>
                        ${message ? `<div class="toast-message">${message}</div>` : ''}
                    </div>
                    <button class="toast-close">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                `;

                this.container.appendChild(toast);
                requestAnimationFrame(() => toast.classList.add('show'));

                const closeToast = () => {
                    toast.classList.remove('show');
                    setTimeout(() => toast.remove(), 300);
                    this.timeouts.delete(toast);
                };

                toast.querySelector('.toast-close').addEventListener('click', closeToast);

                const timeout = setTimeout(closeToast, duration);
                this.timeouts.set(toast, timeout);

                return toast;
            },

            success(title, message) {
                return this.show({ type: 'success', title, message });
            },

            error(title, message) {
                return this.show({ type: 'error', title, message });
            }
        };


        document.addEventListener('DOMContentLoaded', () => {
            const elements = {
                loginModal: document.getElementById('login-modal'),
                registerModal: document.getElementById('register-modal'),
                
                loginForm: document.getElementById('login-form'),
                registerForm: document.getElementById('register-form'),
                
                loginButton: document.getElementById('login-button'),
                registerButton: document.getElementById('register-button'),
                closeLoginModal: document.getElementById('close-login-modal'),
                closeRegisterModal: document.getElementById('close-register-modal'),
                switchToLogin: document.getElementById('switch-to-login'),
                switchToRegister: document.getElementById('switch-to-register'),
                logoutButton: document.getElementById('logout-button'),
                profileButton: document.getElementById('profile-button'),
                
                authButtons: document.getElementById('auth-buttons'),
                userDropdown: document.getElementById('user-dropdown'),
                userName: document.getElementById('user-name'),
                authButton: document.getElementById('auth-button') // add this line
            };

            function safeShow(modal) {
                if (modal) {
                    modal.classList.remove('hidden');
                } else {

                }
            }
            function safeHide(modal) {
                if (modal) {
                    modal.classList.add('hidden');
                } else {

                }
            }

          
            const modalHandlers = {
                show: safeShow,
                hide: safeHide,
                switchToLogin: () => {
                    if (elements.registerModal) safeHide(elements.registerModal);
                    if (elements.loginModal) safeShow(elements.loginModal);
                },
                switchToRegister: () => {
                    if (elements.loginModal) safeHide(elements.loginModal);
                    if (elements.registerModal) safeShow(elements.registerModal);
                }
            };

            
            const updateUIForAuthState = (user) => {
                if (user) {
                    elements.authButtons?.classList.add('hidden');
                    elements.userDropdown?.classList.remove('hidden');
                    elements.authButton?.classList.add('hidden'); // hide auth button
                    if (elements.userName) {
                        elements.userName.textContent = user.displayName || user.email;
                    }
                    modalHandlers.hide(elements.loginModal);
                    modalHandlers.hide(elements.registerModal);
                } else {
                    elements.authButtons?.classList.remove('hidden');
                    elements.userDropdown?.classList.add('hidden');
                    elements.authButton?.classList.remove('hidden'); // show auth button
                }
            };

           
            elements.loginButton?.addEventListener('click', () => modalHandlers.show(elements.loginModal));
            elements.registerButton?.addEventListener('click', () => modalHandlers.show(elements.registerModal));
            elements.closeLoginModal?.addEventListener('click', () => modalHandlers.hide(elements.loginModal));
            elements.closeRegisterModal?.addEventListener('click', () => modalHandlers.hide(elements.registerModal));
            elements.switchToLogin?.addEventListener('click', modalHandlers.switchToLogin);
            elements.switchToRegister?.addEventListener('click', modalHandlers.switchToRegister);

         
            elements.loginForm?.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = e.target.email.value;
                const password = e.target.password.value;
                const remember = e.target.remember.checked;

                try {
                    const persistence = remember
                        ? firebase.auth.Auth.Persistence.LOCAL
                        : firebase.auth.Auth.Persistence.SESSION;
                    await auth.setPersistence(persistence);
                    await auth.signInWithEmailAndPassword(email, password);

                    // ...existing code for successful login...
                    const userWelcome = document.getElementById('user-welcome');
                    const headerEmail = document.getElementById('header-email');
                    const authButtons = document.getElementById('auth-buttons');
                    const userDropdown = document.getElementById('user-dropdown');

                    if (headerEmail) {
                        headerEmail.textContent = email;
                    }
                    if (userWelcome) {
                        userWelcome.classList.remove('hidden');
                        userWelcome.style.display = 'flex';
                    }
                    if (authButtons) {
                        authButtons.classList.add('hidden');
                    }
                    if (userDropdown) userDropdown.classList.remove('hidden');

                    toggleAuthOverlay(false);
                    if (authUI.authButton) authUI.authButton.classList.add('hidden'); // hide auth button
                } catch (error) {
                    // Improved error notification for all Firebase errors
                    const errorMessages = {
                        'auth/user-not-found': "Невірний email або пароль. Спробуйте ще раз.",
                        'auth/wrong-password': "Невірний email або пароль. Спробуйте ще раз.",
                        'auth/invalid-email': "Введіть коректний email.",
                        'auth/too-many-requests': "Забагато невдалих спроб. Спробуйте пізніше.",
                        'auth/network-request-failed': "Проблема з мережею. Перевірте підключення до інтернету.",
                        'auth/invalid-login-credentials': "Невірний email або пароль. Спробуйте ще раз."
                    };
                    const message = errorMessages[error.code] || "Невірний email або пароль. Спробуйте ще раз.";
                    toastSystem.error('Помилка входу', message);
                    // Optionally log for debugging:
                    // console.error('Login error:', error);
                }
            });

           
            elements.registerForm?.addEventListener('submit', async (e) => {
                e.preventDefault();
                
                const name = document.getElementById('register-name').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const passwordConfirm = document.getElementById('register-password-confirm').value;

                try {
                    const { user } = await auth.createUserWithEmailAndPassword(email, password);
                    await user.updateProfile({ displayName: name });

                    
                    const userWelcome = document.getElementById('user-welcome');
                    const headerEmail = document.getElementById('header-email');
                    const authButtons = document.getElementById('auth-buttons');
                    const userDropdown = document.getElementById('user-dropdown');

                    if (headerEmail) {
                        headerEmail.textContent = email;
                    }
                    if (userWelcome) {
                        userWelcome.classList.remove('hidden');
                        userWelcome.style.display = 'flex';
                    }
                    if (authButtons) {
                        authButtons.classList.add('hidden');
                    }
                    if (userDropdown) userDropdown.classList.remove('hidden');

                    toggleAuthOverlay(false);
                    if (elements.authButton) elements.authButton.classList.add('hidden'); // hide auth button
                } catch (error) {
                    
                    if (error.code === 'auth/email-already-in-use') {
                        toastSystem.error('Помилка реєстрації', 'Користувач з таким email вже існує');
                    } else {
                        console.error('Registration error:', error);
                        toastSystem.error('Помилка реєстрації', error.message);
                    }
                }
            });

            
            elements.logoutButton?.addEventListener('click', async () => {
                try {
                    await auth.signOut();
                    toastSystem.success(
                        'Вихід із системи',
                        'Ви успішно вийшли із системи'
                    );
                   
                    document.getElementById('user-welcome')?.classList.add('hidden');
                    document.getElementById('auth-buttons')?.classList.remove('hidden');
                    document.getElementById('user-dropdown')?.classList.add('hidden');
                    location.reload();
                } catch (error) {
                    toastSystem.error(
                        'Помилка виходу',
                        error.message
                    );
                }
            });

            
            document.getElementById('logout-btn-header')?.addEventListener('click', async () => {
                try {
                    await auth.signOut();
                    toastSystem.success(
                        'Вихід із системи',
                        'Ви успішно вийшли із системи'
                    );
                    document.getElementById('user-welcome')?.classList.add('hidden');
                    document.getElementById('auth-buttons')?.classList.remove('hidden');
                    document.getElementById('user-dropdown')?.classList.add('hidden');
                    location.reload();
                } catch (error) {
                    toastSystem.error(
                        'Помилка виходу',
                        error.message
                    );
                }
            });

           
            auth.onAuthStateChanged((user) => {
                const userWelcome = document.getElementById('user-welcome');
                const headerEmail = document.getElementById('header-email');
                const authButtons = document.getElementById('auth-buttons');
                const userDropdown = document.getElementById('user-dropdown');
                if (user) {
                    
                    if (headerEmail) headerEmail.textContent = user.email;
                    if (userWelcome) {
                        userWelcome.classList.remove('hidden');
                        userWelcome.style.display = 'flex';
                    }
                    if (authButtons) authButtons.classList.add('hidden');
                    if (userDropdown) userDropdown.classList.remove('hidden');
                    if (elements.authButton) elements.authButton.classList.add('hidden'); // hide auth button
                } else {
                    
                    if (userWelcome) userWelcome.classList.add('hidden');
                    if (authButtons) authButtons.classList.remove('hidden');
                    if (userDropdown) userDropdown.classList.add('hidden');
                    if (elements.authButton) elements.authButton.classList.remove('hidden'); // show auth button
                }
            });
        });
    </script>

    <div class="auth-overlay" id="auth-overlay">
        <div class="auth-container">
            <div class="auth-header">
                <h2 class="text-2xl font-bold" id="auth-title">Вхід</h2>
                <button class="auth-close" id="auth-close">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="auth-content">
                <div class="auth-tabs">
                    <div class="auth-tab active" id="login-tab">Вхід</div>
                    <div class="auth-tab" id="register-tab">Реєстрація</div>
                </div>

            
                <form id="login-form" class="auth-form">
                    <div class="form-group">
                        <label for="login-email">Email</label>
                        <input type="email" id="login-email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="login-password">Пароль</label>
                        <input type="password" id="login-password" name="password" required>
                    </div>

                    <div class="auth-options">
                        <label class="remember-me">
                            <input type="checkbox" name="remember">
                            <span>Запам'ятати мене</span>
                        </label>
                        <a href="#" class="forgot-password" id="forgot-password">Забули пароль?</a>
                    </div>

                    <button type="submit" class="auth-submit">Увійти</button>
                </form>

             
                <form id="register-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="register-name">Ім'я</label>
                        <input type="text" id="register-name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label for="register-email">Email</label>
                        <input type="email" id="register-email" name="email" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="register-password">Пароль</label>
                        <input type="password" id="register-password" name="password" required>
                        <div class="password-strength">
                            <div class="password-strength-bar"></div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="register-password-confirm">Підтвердження пароля</label>
                        <input type="password" id="register-password-confirm" name="password_confirm" required>
                    </div>

                    <button type="submit" class="auth-submit">Зареєструватися</button>
                </form>

               
                <form id="reset-form" class="auth-form hidden">
                    <div class="form-group">
                        <label for="reset-email">Email</label>
                        <input type="email" id="reset-email" name="email" required>
                    </div>
                    <button type="submit" class="auth-submit">Відновити пароль</button>
                    <button type="button" class="mt-4 text-primary hover:text-secondary" id="back-to-login">
                        ← Повернутися до входу
                    </button>
                </form>
            </div>
        </div>
    </div>

   
    <script>
        document.addEventListener('DOMContentLoaded', () => {
           
            const authUI = {
                overlay: document.getElementById('auth-overlay'),
                container: document.querySelector('.auth-container'),
                title: document.getElementById('auth-title'),
                closeBtn: document.getElementById('auth-close'),
                loginTab: document.getElementById('login-tab'),
                registerTab: document.getElementById('register-tab'),
                loginForm: document.getElementById('login-form'),
                registerForm: document.getElementById('register-form'),
                resetForm: document.getElementById('reset-form'),
                forgotPassword: document.getElementById('forgot-password'),
                backToLogin: document.getElementById('back-to-login'),
                authButton: document.getElementById('auth-button')
            };

            
            const showForm = (formId) => {
                [authUI.loginForm, authUI.registerForm, authUI.resetForm].forEach(form => {
                    form?.classList.add('hidden');
                });
                document.getElementById(formId)?.classList.remove('hidden');
                
                
                if (formId === 'login-form') {
                    authUI.loginTab?.classList.add('active');
                    authUI.registerTab?.classList.remove('active');
                    authUI.title.textContent = 'Вхід';
                } else if (formId === 'register-form') {
                    authUI.registerTab?.classList.add('active');
                    authUI.loginTab?.classList.remove('active');
                    authUI.title.textContent = 'Реєстрація';
                } else {
                    authUI.title.textContent = 'Відновлення пароля';
                }
            };

           
            authUI.authButton?.addEventListener('click', () => {
                toggleAuthOverlay(true);
                showForm('login-form');
            });

            authUI.closeBtn?.addEventListener('click', () => toggleAuthOverlay(false));
            authUI.overlay?.addEventListener('click', (e) => {
                if (e.target === authUI.overlay) toggleAuthOverlay(false);
            });

            authUI.loginTab?.addEventListener('click', () => showForm('login-form'));
            authUI.registerTab?.addEventListener('click', () => showForm('register-form'));
            authUI.forgotPassword?.addEventListener('click', (e) => {
                e.preventDefault();
                showForm('reset-form');
            });
            authUI.backToLogin?.addEventListener('click', () => showForm('login-form'));

           
            const checkPasswordStrength = (password) => {
                let strength = 0;
                if (password.length >= 8) strength++;
                if (password.match(/[a-z]+/)) strength++;
                if (password.match(/[A-Z]+/)) strength++;
                if (password.match(/[0-9]+/)) strength++;
                if (password.match(/[^a-zA-Z0-9]+/)) strength++;
                
                const strengthBar = document.querySelector('.password-strength-bar');
                if (!strengthBar) return;
                
                strengthBar.className = 'password-strength-bar';
                switch(strength) {
                    case 0:
                    case 1:
                        strengthBar.classList.add('strength-weak');
                        break;
                    case 2:
                        strengthBar.classList.add('strength-medium');
                        break;
                    case 3:
                    case 4:
                        strengthBar.classList.add('strength-strong');
                        break;
                    case 5:
                        strengthBar.classList.add('strength-very-strong');
                        break;
                }
            };

            
            document.getElementById('register-password')?.addEventListener('input', (e) => {
                checkPasswordStrength(e.target.value);
            });

            
            authUI.loginForm?.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = e.target.email.value;
                const password = e.target.password.value;
                const remember = e.target.remember.checked;

                try {
                    const persistence = remember
                        ? firebase.auth.Auth.Persistence.LOCAL
                        : firebase.auth.Auth.Persistence.SESSION;
                    await auth.setPersistence(persistence);
                    await auth.signInWithEmailAndPassword(email, password);

                    // ...existing code for successful login...
                    const userWelcome = document.getElementById('user-welcome');
                    const headerEmail = document.getElementById('header-email');
                    const authButtons = document.getElementById('auth-buttons');
                    const userDropdown = document.getElementById('user-dropdown');

                    if (headerEmail) {
                        headerEmail.textContent = email;
                    }
                    if (userWelcome) {
                        userWelcome.classList.remove('hidden');
                        userWelcome.style.display = 'flex';
                    }
                    if (authButtons) {
                        authButtons.classList.add('hidden');
                    }
                    if (userDropdown) userDropdown.classList.remove('hidden');

                    toggleAuthOverlay(false);
                    if (authUI.authButton) authUI.authButton.classList.add('hidden'); // hide auth button
                } catch (error) {
                    // Improved error notification for all Firebase errors
                    const errorMessages = {
                        'auth/user-not-found': "Невірний email або пароль. Спробуйте ще раз.",
                        'auth/wrong-password': "Невірний email або пароль. Спробуйте ще раз.",
                        'auth/invalid-email': "Введіть коректний email.",
                        'auth/too-many-requests': "Забагато невдалих спроб. Спробуйте пізніше.",
                        'auth/network-request-failed': "Проблема з мережею. Перевірте підключення до інтернету.",
                        'auth/invalid-login-credentials': "Невірний email або пароль. Спробуйте ще раз."
                    };
                    const message = errorMessages[error.code] || "Невірний email або пароль. Спробуйте ще раз.";
                    toastSystem.error('Помилка входу', message);
                    // Optionally log for debugging:
                    // console.error('Login error:', error);
                }
            });

            authUI.registerForm?.addEventListener('submit', async (e) => {
                e.preventDefault();
                const name = document.getElementById('register-name').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const passwordConfirm = document.getElementById('register-password-confirm').value;

                try {
                    const { user } = await auth.createUserWithEmailAndPassword(email, password);
                    await user.updateProfile({ displayName: name });

                    
                    const userWelcome = document.getElementById('user-welcome');
                    const headerEmail = document.getElementById('header-email');
                    const authButtons = document.getElementById('auth-buttons');
                    const userDropdown = document.getElementById('user-dropdown');

                    if (headerEmail) {
                        headerEmail.textContent = email;
                    }
                    if (userWelcome) {
                        userWelcome.classList.remove('hidden');
                        userWelcome.style.display = 'flex';
                    }
                    if (authButtons) {
                        authButtons.classList.add('hidden');
                    }
                    if (userDropdown) userDropdown.classList.remove('hidden');

                    toggleAuthOverlay(false);
                    if (authUI.authButton) authUI.authButton.classList.add('hidden'); // hide auth button
                } catch (error) {
                    
                    if (error.code === 'auth/email-already-in-use') {
                        toastSystem.error('Помилка реєстрації', 'Користувач з таким email вже існує');
                    } else {
                        console.error('Registration error:', error);
                        toastSystem.error('Помилка реєстрації', error.message);
                    }
                }
            });

            authUI.resetForm?.addEventListener('submit', async (e) => {
                e.preventDefault();
                const email = e.target.email.value;

                try {
                    await auth.sendPasswordResetEmail(email);
                    toastSystem.success(
                        'Відновлення пароля',
                        'Інструкції для відновлення надіслано на ваш email'
                    );
                    showForm('login-form');
                } catch (error) {
                    toastSystem.error('Помилка відновлення', error.message);
                }
            });

            const handleSocialAuth = async (provider) => {
                try {
                    const result = await auth.signInWithPopup(provider);
                    toastSystem.success('Успішний вхід', 'Ласкаво просимо!');
                    toggleAuthOverlay(false);
                } catch (error) {
                    toastSystem.error('Помилка входу', error.message);
                }
            };

        });
    </script>
    
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script>
      (function() {
        emailjs.init("wvpQ8lhJvxdzsGLhO");
      })();
    </script>
    <base href="./">
</head>
<body class="min-h-screen">
   
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>

    <header class="bg-white text-[var(--text)] fixed top-0 left-0 w-full z-30 border-b border-gray-200">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <a href="/" class="text-2xl font-bold text-[var(--text)]" id="logo-link">BookHeaven</a>
            <div class="hidden md:flex flex-1 mx-6">
                <div class="relative w-full max-w-md">
                    <input id="search-bar" type="text" placeholder="Пошук книг..." class="search-bar w-full" aria-label="Пошук книг">
                </div>
            </div>
            <div class="flex items-center space-x-6">
                <div id="user-welcome" class="hidden items-center text-sm">
                    <span class="font-semibold mr-1">Вітаємо,</span>
                    <span id="header-email" class="text-[var(--primary)] truncate max-w-[200px]"></span>
                    <button id="logout-btn-header"
                        class="ml-3 px-4 py-1 rounded-full bg-[var(--gray-200)] text-[var(--primary)] text-xs font-semibold hover:bg-[var(--primary)] hover:text-white transition-all duration-200"
                        style="min-width: 70px; margin-left: 12px; border-radius: 9999px;">
                        Вийти
                    </button>
                </div>
                <button id="auth-button" aria-label="Профіль" class="hover:text-[var(--primary)]">
                    <svg data-feather="user" class="w-6 h-6 cursor-pointer"></svg>
                </button>

                <button id="cart" aria-label="Відкрити кошик" class="relative">
                    <svg data-feather="shopping-cart" class="w-6 h-6 cursor-pointer hover:text-[var(--primary)]"></svg>
                    <span id="cart-counter" class="absolute -top-2 -right-2 bg-[var(--primary)] text-white rounded-full px-2 py-1 text-xs">0</span>
                </button>
                <button id="menu-toggle" class="md:hidden" aria-label="Відкрити меню" aria-controls="mobile-menu" aria-expanded="false">
                    <svg data-feather="menu" class="w-6 h-6"></svg>
                </button>
            </div>
        </div>
        <nav class="bg-white border-t border-gray-200 sticky top-[72px] w-full z-20">
            <div class="container mx-auto px-4 py-3 flex justify-center space-x-8">
                <div class="dropdown relative">
                    <a href="#genres" class="nav-link text-[var(--text)] hover:text-[var(--primary)]" aria-haspopup="true" aria-expanded="false">Жанри</a>
                    <div class="dropdown-content hidden absolute left-0 mt-2 w-48 bg-white border border-gray-200 rounded-md shadow-lg">
                        <a href="#fiction" class="block px-4 py-2 text-[var(--text)] hover:bg-gray-100">Фантастика</a>
                        <a href="#classics" class="block px-4 py-2 text-[var(--text)] hover:bg-gray-100">Класика</a>
                        <a href="#ukrainian" class="block px-4 py-2 text-[var(--text)] hover:bg-gray-100">Українська література</a>
                        <a href="#novels" class="block px-4 py-2 text-[var(--text)] hover:bg-gray-100">Новели</a>
                    </div>
                </div>
                <a href="#discounts" class="nav-link text-[var(--text)] hover:text-[var(--primary)]">Акції</a>
                <a href="#" class="nav-link text-[var(--text)] hover:text-[var(--primary)]" data-modal="about">Про нас</a>
                <a href="#" class="nav-link text-[var(--text)] hover:text-[var(--primary)]" data-modal="shipping">Доставка та оплата</a>
                <a href="#" class="nav-link text-[var(--text)] hover:text-[var(--primary)]" data-modal="contacts">Контакти</a>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden fixed inset-y-0 right-0 w-3/4 text-[var(--text)] mobile-menu z-30" role="navigation">
            <div class="flex flex-col p-6 space-y-4">
                <div class="relative">
                    <input id="mobile-search-bar" type="text" placeholder="Пошук книг..." class="search-bar w-full" aria-label="Пошук книг на мобільному">
                </div>
                <a href="#genres" class="text-lg hover:text-[var(--primary)]">Жанри</a>
                <a href="#discounts" class="text-lg hover:text-[var(--primary)]">Акції</a>
                <a href="#" class="text-lg hover:text-[var(--primary)]" data-modal="about">Про нас</a>
                <a href="#" class="text-lg hover:text-[var(--primary)]" data-modal="shipping">Доставка та оплата</a>
                <a href="#" class="text-lg hover:text-[var(--primary)]" data-modal="contacts">Контакти</a>
                <a href="/login" class="text-lg hover:text-[var(--primary)]">Увійти</a>
                <a href="/signup" class="text-lg hover:text-[var(--primary)]">Зареєструватися</a>
            </div>
        </div>
    </header>

    <section id="top" class="hero-section text-white" data-aos="fade-in">
        <div class="container mx-auto px-4 text-center relative z-10 py-24">
            <h1 class="mb-6" data-aos="fade-up" data-aos-delay="100">Література, що надихає</h1>
            <p class="text-xl text-gray-200 mb-8 max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="200">Відкривайте нові світи з нашою колекцією книг за доступними цінами</p>
            <a href="#genres" class="btn inline-block" data-aos="fade-up" data-aos-delay="300">Переглянути книги</a>
        </div>
    </section>

    <section id="discounts" class="py-16" data-aos="fade-up">
        <div class="container mx-auto px-4">
            <h2 class="text-[var(--text)] mb-12 text-center">Акційні книги</h2>
            <div class="swiper-container discount-swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="100">
                            <img src="fantasy/41_1_131.jpg" alt="Обкладинка книги Гаррі Поттер і філософський камінь" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Гаррі Поттер і філософський камінь</h3>
                            <p class="text-sm text-gray-600">Дж. К. Роулінг</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">550 ₴ <span class="line-through text-gray-400">600 ₴</span></p>
                            <button onclick="addToCart('Гаррі Поттер і філософський камінь', 550)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="200">
                            <img src="fantasy/26_1_329.jpg" alt="Обкладинка книги 1984" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">1984</h3>
                            <p class="text-sm text-gray-600">Джордж Орвелл</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">600 ₴ <span class="line-through text-gray-400">650 ₴</span></p>
                            <button onclick="addToCart('1984', 600)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="300">
                            <img src="fantasy/thumb_60262_380_600_0_0_auto.jpg" alt="Обкладинка книги Дюна" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Дюна</h3>
                            <p class="text-sm text-gray-600">Френк Герберт</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">700 ₴ <span class="line-through text-gray-400">750 ₴</span></p>
                            <button onclick="addToCart('Дюна', 700)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="400">
                            <img src="classic/cover_92_124.jpg" alt="Обкладинка книги Гордість і упередження" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Гордість і упередження</h3>
                            <p class="text-sm text-gray-600">Джейн Остін</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">650 ₴ <span class="line-through text-gray-400">700 ₴</span></p>
                            <button onclick="addToCart('Гордість і упередження', 650)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="500">
                            <img src="ua/img_12076.webp" alt="Обкладинка книги Кобзар" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Кобзар</h3>
                            <p class="text-sm text-gray-600">Тарас Шевченко</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">550 ₴ <span class="line-through text-gray-400">600 ₴</span></p>
                            <button onclick="addToCart('Кобзар', 550)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="600">
                            <img src="novels/122_1_6.jpg" alt="Обкладинка книги Кривавий Меридіан" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Кривавий Меридіан</h3>
                            <p class="text-sm text-gray-600">Кормак Маккарті</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">800 ₴ <span class="line-through text-gray-400">850 ₴</span></p>
                            <button onclick="addToCart('Кривавий Меридіан', 800)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="700">
                            <img src="classic/mayster--margarita_4209.jpg" alt="Обкладинка книги Майстер і Маргарита" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Майстер і Маргарита</h3>
                            <p class="text-sm text-gray-600">Михайло Булгаков</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">750 ₴ <span class="line-through text-gray-400">800 ₴</span></p>
                            <button onclick="addToCart('Майстер і Маргарита', 750)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="800">
                            <img src="classic/Vijna-i-myr-1-237x365.jpg" alt="Обкладинка книги Війна і мир" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Війна і мир</h3>
                            <p class="text-sm text-gray-600">Лев Толстой</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">850 ₴ <span class="line-through text-gray-400">900 ₴</span></p>
                            <button onclick="addToCart('Війна і мир', 850)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="900">
                            <img src="fantasy/37259_67364.jpg" alt="Обкладинка книги Відьмак: Останнє бажання" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Відьмак: Останнє бажання</h3>
                            <p class="text-sm text-gray-600">Анджей Сапковський</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">600 ₴ <span class="line-through text-gray-400">650 ₴</span></p>
                            <button onclick="addToCart('Відьмак: Останнє бажання', 600)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="1000">
                            <img src="novels/192_1_3.jpg" alt="Обкладинка книги Сто років самотності" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Сто років самотності</h3>
                            <p class="text-sm text-gray-600">Габріель Гарсія Маркес</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">700 ₴ <span class="line-through text-gray-400">750 ₴</span></p>
                            <button onclick="addToCart('Сто років самотності', 700)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                    <div class="swiper-slide" draggable="true">
                        <div class="book-card p-6" data-aos="fade-up" data-aos-delay="1100">
                            <img src="ua/cover_858_1.jpg" alt="Обкладинка книги Лісова пісня" loading="lazy">
                            <h3 class="font-semibold text-[var(--text)] mt-4">Лісова пісня</h3>
                            <p class="text-sm text-gray-600">Леся Українка</p>
                            <div class="flex items-center my-2">
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>
                                <svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>
                            </div>
                            <p class="text-lg font-bold text-[var(--primary)]">500 ₴ <span class="line-through text-gray-400">550 ₴</span></p>
                            <button onclick="addToCart('Лісова пісня', 500)" class="btn w-full mt-4">Додати до кошика</button>
                        </div>
                    </div>
                </div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-pagination"></div>
            </div>
        </div>
    </section>

    <section class="genre-section">
        <div class="container mx-auto px-4">
            <h2>Книги за жанрами</h2>
            <div class="flex flex-col md:flex-row gap-8">
                <aside class="filter-sidebar w-full md:w-1/4 p-4" id="filter-sidebar">
                    <h3 class="text-xl font-semibold text-[var(--text)] mb-4">Фільтри</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ціна (₴)</label>
                            <input type="range" min="500" max="900" value="900" class="w-full accent-[var(--primary)]" id="price-filter" oninput="filterBooks()" aria-label="Фільтр за ціною">
                            <div class="text-sm text-gray-600 mt-2">До <span id="price-value">900</span> ₴</div>
                        </div>
                    </div>
                    <button id="toggle-filters" class="md:hidden mt-4 w-full btn">Показати фільтри</button>
                </aside>
                <div class="w-full md:w-3/4">
                    <div class="genre-buttons">
                        <button class="genre-button active" data-genre="all">Все жанри</button>
                        <button class="genre-button" data-genre="fiction">Фантастика</button>
                        <button class="genre-button" data-genre="classics">Класика</button>
                        <button class="genre-button" data-genre="ukrainian">Українська література</button>
                        <button class="genre-button" data-genre="novels">Новели</button>
                    </div>
                                       <div id="genre-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
                </div>
            </div>
        </div>
    </section>

    <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-40 modal" role="dialog" aria-labelledby="cart-modal-title">
        <div class="bg-white rounded-2xl shadow-2xl p-0 w-full max-w-lg modal-content relative overflow-hidden">
            <div class="flex items-center justify-between px-8 py-6 border-b border-gray-100 bg-gradient-to-r from-yellow-50 to-white">
                <h2 id="cart-modal-title" class="text-2xl font-bold text-[var(--primary)] flex itemscenter gap-2">
                    <svg class="w-7 h-7 text-[var(--primary)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13l-1.35 2.7A2 2 0 008.48 19h7.04a2 2 0 001.83-1.3L17 13M7 13V6h13"></path>
                    </svg>
                    Ваш кошик
                </h2>
                <button id="close-cart" class="text-gray-400 hover:text-[var(--primary)] transition-colors duration-200">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="px-8 py-6 max-h-[350px] overflow-y-auto bg-white">
                <div id="cart-items" class="space-y-6"></div>
            </div>
            <div class="px-8 py-4 border-t border-gray-100 bg-gray-50">
                <div class="flex items-center justify-between mb-4">
                    <span class="font-semibold text-[var(--text)]">Сума:</span>
                    <span id="cart-total" class="text-lg font-bold text-[var(--primary)]">0 ₴</span>
                </div>
                <div class="flex flex-col md:flex-row gap-3">
                    <button id="clear-cart" class="flex-1 btn bg-gray-100 text-[var(--primary)] border border-gray-200 hover:bg-gray-200 transition">Очистити</button>
                    <button id="order-btn" class="flex-1 btn bg-[var(--primary)] hover:bg-[var(--secondary)] text-white transition">Оформити замовлення</button>
               </div>
            </div>
        </div>
    </div>

    <div id="info-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-40 modal" role="dialog" aria-labelledby="info-modal-title">
        <div class="bg-white rounded-[16px] p-8 w-full max-w-md modal-content">
            <h2 id="info-modal-title" class="text-2xl font-bold text-[var(--text)] mb-6"></h2>
            <div id="info-modal-content" class="text-gray-600 mb-6"></div>
            <div class="flex justify-end">
                <button id="close-info-modal" class="btn bg-gray-200 text-[var(--text)] hover:bg-gray-300">Закрити</button>
            </div>
        </div>
    </div>

    <div id="checkout-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 modal">
        <div id="order-form" class="bg-white rounded-[16px] p-8 w-full max-w-lg modal-content">
            <h2 class="text-2xl font-bold text-[var(--text)] mb-6">Оформлення замовлення</h2>
            <form class="space-y-4">
                <label class="block">Ім'я:
                    <input type="text" name="name" class="w-full border border-gray-300 p-3 rounded-md" required>
                </label>
                <label class="block">Телефон:
                    <input type="tel" name="phone" class="w-full border border-gray-300 p-3 rounded-md" required>
                </label>
                <label class="block">Email:
                    <input type="email" name="email" class="w-full border border-gray-300 p-3 rounded-md" required>
                </label>
                <label class="block">Адреса:
                    <textarea name="address" class="w-full border border-gray-300 p-3 rounded-md" required></textarea>
                </label>
                <div class="flex justify-end space-x-4 pt-4">
                    <button type="button" id="close-form" class="btn bg-gray-200 text-[var(--text)] hover:bg-gray-300">Скасувати</button>
                    <button onclick="submitOrder()" type="button" class="btn">Оформити замовлення</button>
                </div>
            </form>
        </div>
    </div>

    <div id="book-info-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-40 modal" role="dialog" aria-labelledby="book-info-modal-title">
        <div class="bg-white rounded-[16px] p-8 w-full max-w-md modal-content">
            <h2 id="book-info-modal-title" class="text-2xl font-bold text-[var(--text)] mb-6">Інформація про книгу</h2>
            <div id="book-info-modal-content" class="text-gray-600 mb-6">
                <img id="book-info-modal-image" src="" alt="Обкладинка книги" class="w-full h-64 object-cover rounded-md mb-4" loading="lazy">
                <h3 id="book-info-modal-book-title" class="text-xl font-semibold text-[var(--text)] mb-2"></h3>
                <p id="book-info-modal-book-author" class="text-base text-gray-600 mb-2"></p>
                <p id="book-info-modal-book-description" class="text-gray-600 mb-4"></p>
                <p id="book-info-modal-book-price" class="text-lg font-bold text-[var(--primary)]"></p>
            </div>
            <div class="flex justify-end">
                <button id="close-book-info-modal" class="btn bg-gray-200 text-[var(--text)] hover:bg-gray-300">Закрити</button>
            </div>
        </div>
    </div>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="text-center">
                    <h3 class="text-xl font-semibold mb-4">Про нас</h3>
                    <img src="path/to/logo.png" alt="BookHeaven логотип" class="mx-auto mb-4 h-16 w-auto">
                    <p class="text-sm">Книжковий магазин 'BookHeaven' - ваш надійний партнер у світі літератури. Ми пропонуємо широкий асортимент книг для всіх вікових груп.</p>
                </div>
                <div class="text-center">
                    <h3 class="text-xl font-semibold mb-4">Контакти</h3>
                    <p class="text-sm mb-2">Електронна пошта: rfomichenko1@gmail.com</p>
                    <p class="text-sm mb-2">Телефон:+38994453335</p>
                    <p class="text-sm">Адреса: вул. Книжкова, 10, Київ, Україна</p>
                </div>
                <div class="text-center">
                    <h3 class="text-xl font-semibold mb-4">Допомога</h3>
                    <ul class="text-sm space-y-2">
                        <li>
                            <a href="#" data-modal="shipping" class="hover:text-[var(--primary)] transition-colors duration-200">Доставка та оплата</a>
                        </li>
                        <li>
                            <a href="#" data-modal="faq" class="hover:text-[var(--primary)] transition-colors duration-200">Часті запитання</a>
                        </li>
                        <li>
                            <a href="#" data-modal="returns" class="hover:text-[var(--primary)] transition-colors duration-200">Повернення</a>
                        </li>
                    </ul>
                </div>
                <div class="text-center">
                    <h3 class="text-xl font-semibold mb-4">Підписка</h3>
                    <form class="flex flex-col items-center gap-3">
                        <input type="email" placeholder="Ваш email" class="p-3 rounded-md border border-gray-300 w-full max-w-xs text-[var(--text)]" aria-label="Email для підписки">
                        <button type="submit" class="btn w-full max-w-xs">Підписатися</button>
                    </form>
                </div>
            </div>
            <div class="mt-8 text-center text-sm">
                <p>© 2025 BookHeaven. Усі права захищені.</p>
                <a href="/privacy" class="hover:text-[var(--primary)]">Політика конфіденційності</a> | <a href="/terms" class="hover:text-[var(--primary)]">Умови використання</a>
                <br>
                <a href="https://github.com/ВАШ-ЛОГИН/ВАШ-РЕПОЗИТОРИЙ" target="_blank" rel="noopener" class="hover:text-[var(--primary)]">Вихідний код на GitHub</a>
                <span class="mx-2">|</span>
                <a href="https://ВАШ-ЛОГИН.github.io/ВАШ-РЕПОЗИТОРИЙ/" target="_blank" rel="noopener" class="hover:text-[var(--primary)]">Відкрити сайт на GitHub Pages</a>
            </div>
        </div>
    </footer>

    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            feather.replace();
            AOS.init({ duration: 800, once: true });

            const discountSwiper = new Swiper('.discount-swiper', {
                slidesPerView: 1,
                spaceBetween: 24,
                loop: true,
                autoplay: { delay: 3000, disableOnInteraction: false },
                navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
                pagination: { el: '.swiper-pagination', clickable: true },
                breakpoints: {
                    640: { slidesPerView: 2 },
                    768: { slidesPerView: 3 },
                    1024: { slidesPerView: 4 }
                }
            });

            
            new Swiper('.swiper-container:not(.discount-swiper)', {
                slidesPerView: 1,
                spaceBetween: 24,
                navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
                pagination: { el: '.swiper-pagination', clickable: true },
                breakpoints: {
                    640: { slidesPerView: 2 },
                    768: { slidesPerView: 3 },
                    1024: { slidesPerView: 4 }
                }
            });

         
            const swiperWrapper = document.querySelector('.discount-swiper .swiper-wrapper');
            let draggedSlide = null;

            function handleDragStart(e) {
                draggedSlide = e.target.closest('.swiper-slide');
                if (!draggedSlide) return;
                draggedSlide.classList.add('dragging');
                e.dataTransfer.setData('text/plain', '');
                discountSwiper.autoplay.stop();
            }

            function handleDragOver(e) {
                e.preventDefault();
            }

            function handleDrop(e) {
                e.preventDefault();
                const dropTarget = e.target.closest('.swiper-slide');
                if (!dropTarget || draggedSlide === dropTarget) {
                    draggedSlide.classList.remove('dragging');
                    discountSwiper.autoplay.start();
                    return;
                }

                const allSlides = Array.from(swiperWrapper.querySelectorAll('.swiper-slide'));
                const draggedIndex = allSlides.indexOf(draggedSlide);
                const dropIndex = allSlides.indexOf(dropTarget);

                if (draggedIndex < dropIndex) {
                    dropTarget.after(draggedSlide);
                } else {
                    dropTarget.before(draggedSlide);
                }

                draggedSlide.classList.remove('dragging');
                draggedSlide = null;
                discountSwiper.update();
                discountSwiper.autoplay.start();
            }

            function handleDragEnd() {
                if (draggedSlide) {
                    draggedSlide.classList.remove('dragging');
                    draggedSlide = null;
                }
                discountSwiper.autoplay.start();
            }

            document.querySelectorAll('.discount-swiper .swiper-slide').forEach(slide => {
                slide.addEventListener('dragstart', handleDragStart);
                slide.addEventListener('dragover', handleDragOver);
                slide.addEventListener('drop', handleDrop);
                slide.addEventListener('dragend', handleDragEnd);
            });

            
            const modalContent = {
                about: {
                    title: "Про нас",
                    content: `
                        <p>Книжковий магазин "BookHeaven" – це місце, де кожен любитель книг знайде щось для себе. Ми пропонуємо широкий асортимент літератури: від класики до сучасних бестселерів, від дитячих книг до наукової літератури.</p>
                        <p>Наша місія – зробити книги доступними для всіх, тому ми пропонуємо конкурентні ціни та швидку доставку по всій Україні. Ми також регулярно проводимо акції та надаємо знижки, щоб ви могли насолоджуватися улюбленими творами за вигідними цінами.</p>
                        <p>Приєднуйтесь до нашої спільноти книголюбів і відкривайте нові світи разом з "BookHeaven"!</p>
                    `
                },
                shipping: {
                    title: "Доставка та оплата",
                    content: `
                        <p><strong>Доставка:</strong></p>
                        <ul class="list-disc pl-5">
                            <li>Доставка по Україні через "Нова Пошта" та "Укрпошта".</li>
                            <li>Термін доставки: 1-3 робочі дні (залежить від регіону).</li>
                            <li>Вартість доставки залежить від тарифів перевізника.</li>
                            <li>Безкоштовна доставка при замовленні від 1000 ₴.</li>
                        </ul>
                        <p><strong>Оплата:</strong></p>
                        <ul class="list-disc pl-5">
                            <li>Оплата онлайн через LiqPay або банківською картою.</li>
                            <li>Післяплата при отриманні (додаткова комісія за тарифами перевізника).</li>
                            <li>Можливість оплати частинами через популярні сервіси.</li>
                        </ul>
                    `
                },
                contacts: {
                    title: "Контакти",
                    content: `
                        <p>Ми завжди раді допомогти вам! Звертайтесь до нас за будь-якими питаннями:</p>
                                               <ul class="list-disc pl-5">
                            <li><strong>Електронна пошта:</strong> <a href="mailto:rmykhailovsky@ifkep.ukr.education" class="text-[var(--primary)] hover:underline">rmykhailovsky@ifkep.ukr.education</a></li>
                            <li><strong>Телефон:</strong>+38994453335</li>
                            <li><strong>Адреса:</strong> вул. Книжкова, 10, Київ, Україна</li>
                            <li><strong>Графік роботи:</strong> Пн-Пт: 9:00-18:00, Сб: 10:00-16:00, Нд: вихідний</li>
                        </ul>
                        <p></p>
                    `
                },
                faq: {
                    title: "Часті запитання",
                    content: `
                        <ul class="list-disc pl-5 space-y-2">
                            <li><strong>Як зробити замовлення?</strong><br>Оберіть книги, додайте їх у кошик та натисніть "Оформити замовлення". Заповніть форму та підтвердіть замовлення.</li>
                            <li><strong>Які способи оплати доступні?</strong><br>Онлайн-оплата карткою, LiqPay, післяплата при отриманні.</li>
                            <li><strong>Як відстежити замовлення?</strong><br>Після відправки ви отримаєте SMS з номером накладної для відстеження на сайті перевізника.</li>
                            <li><strong>Чи можна повернути книгу?</strong><br>Так, протягом 14 днів за умови збереження товарного вигляду. Деталі у розділі "Повернення".</li>
                        </ul>
                    `
                },
                returns: {
                    title: "Повернення",
                    content: `
                    <p>Ви можете повернути товар протягом 14 днів з моменту отримання, якщо:</p>
                    <ul class="list-disc pl-5 mb-2">
                        <li>Книга не була у використанні та збережено товарний вигляд</li>
                        <li>Є документ, що підтверджує покупку (чек, накладна)</li>
                    </ul>
                    <p>Для оформлення повернення зверніться до нашої служби підтримки за email або телефоном. Вартість доставки при поверненні сплачує покупець, якщо повернення не пов'язане з браком.</p>
                `
                }
            };

           
            const booksByGenre = {
                fiction: [
                    { title: "Гаррі Поттер і філілософський камінь", author: "Дж. К. Роулінг", price: 523, image: "fantasy/41_1_131.jpg", rating: 4.5 },
                    { title: "1984", author: "Джордж Орвелл", price: 612, image: "fantasy/26_1_329.jpg", rating: 4.7 },
                    { title: "Дюна", author: "Френк Герберт", price: 749, image: "fantasy/thumb_60262_380_600_0_0_auto.jpg", rating: 4.8 },
                    { title: "Гра Ендера", author: "Орсон Скотт Кард", price: 681, image: "fantasy/346476_1.jpg", rating: 4.6 },
                    { title: "Автостопом по галактиці", author: "Дуглас Адамс", price: 498, image: "fantasy/197_1_4.jpg", rating: 2.4 },
                    { title: "Проблема трьох тіл", author: "Лю Цисінь", price: 899, image: "fantasy/cover_3_tela_new-2_1.jpg", rating: 4.7 },
                    { title: "Нейромант", author: "Вільям Гібсон", price: 732, image: "fantasy/821038_front.webp", rating: 3.5 },
                    { title: "Фундація", author: "Айзек Азімов", price: 915, image: "fantasy/149_1_4.jpg", rating: 4.6 },
                    { title: "Соляріс", author: "Станіслав Лем", price: 587, image: "fantasy/15_3_107.jpg", rating: 2.5 },
                    { title: "Відьмак: Останнє бажання", author: "Анджей Сапковський", price: 764, image: "fantasy/37259_67364.jpg", rating: 4.8 },
                    { title: "Сніданок у Тифані", author: "Трумен Капоте", price: 529, image: "fantasy/img210_45.webp", rating: 4.5 },
                    { title: "Янтарни телескоп", author: "Філіп Пулман", price: 603, image: "fantasy/436b48f1_4300_11ec_8154_0050568ef5e6_80d1c12f_4303_11ec_8154_0050568ef5e6.webp", rating: 4.7 },
                    { title: "Американські боги", author: "Ніл Гейман", price: 677, image: "fantasy/766033_1_original.jpg", rating: 4.6 },
                    { title: "The Colour of Magic", author: "Террі Пратчетт", price: 480, image: "fantasy/The_Colour_of_Magic_(cover_art).jpg", rating: 4.4 },
                    { title: "Гра престолів", author: "Джордж Р. Р. Мартін", price: 845, image: "fantasy/gra.jpg", rating: 4.8 },
                    { title: "Голодні ігри", author: "Сьюзен Коллінз", price: 563, image: "fantasy/61558_122417.jpg", rating: 4.5 },
                    { title: "Дивергент", author: "Вероніка Рот", price: 618, image: "fantasy/img_0001_41_19.webp", rating: 4.7 },
                    { title: "Місто і місто", author: "Чайна Мьєвіль", price: 692, image: "fantasy/81pjxcrki3l.jpg", rating: 4.6 }
                ],
                classics: [
                    { title: "Гордість і упередження", author: "Джейн Остін", price: 634, image: "classic/cover_92_124.jpg", rating: 4.6 },
                    { title: "Майстер і Маргарита", author: "Михайло Булгаков", price: 789, image: "classic/mayster--margarita_4209.jpg", rating: 4.8 },
                    { title: "Злочин і кара", author: "Федір Достоєвський", price: 701, image: "classic/zlochyn-i-kara-908795.800x800.jpg", rating: 4.7 },
                    { title: "Джейн Ейр", author: "Шарлотта Бронте", price: 599, image: "classic/26_1_247.webp", rating: 3.5 },
                    { title: "Великий Гетсбі", author: "Френсіс Скотт Фіцджеральд", price: 552, image: "classic/1363_1_1.jpg", rating: 2.4 },
                    { title: "Анна Кареніна", author: "Лев Толстой", price: 843, image: "classic/221848_1.jpg", rating: 4.6 },
                    { title: "Грозовий перевал", author: "Емілі Бронте", price: 668, image: "classic/cover_83_51.jpg", rating: 3.5 },
                    { title: "Брати Карамазови", author: "Федір Достоєвський", price: 927, image: "classic/dostoevskii_bratya_karamazovi_1_f9beb835-0bbb-4006-9d43-82dd4075c57c.jpg", rating: 4.8 },
                    { title: "Портрет Доріана Грея", author: "Оскар Уайльд", price: 619, image: "classic/img371_67.webp", rating: 4.7 },
                    { title: "Війна і мир", author: "Лев Толстой", price: 899, image: "classic/Vijna-i-myr-1-237x365.jpg", rating: 4.9 },
                    { title: "Три мушкетери", author: "Александр Дюма", price: 617, image: "classic/294552_35463134.webp", rating: 4.5 },
                    { title: "Граф Монте-Крісто", author: "Александр Дюма", price: 653, image: "classic/9ef3127b4c633c35d84f3deccc52af2d.jpg", rating: 4.7 },
                    { title: "Дон Кіхот", author: "Мігель де Сервантес", price: 721, image: "classic/_9972.webp", rating: 4.6 },
                    { title: "Фауст", author: "Йоганн Вольфганг фон Гете", price: 539, image: "classic/img512_5_24.jpg", rating: 4.5 },
                    { title: "Мертві душі", author: "Микола Гоголь", price: 601, image: "classic/137124_17862373.jpg", rating: 4.7 },
                    { title: "Ромео і Джульєтта", author: "Вільям Шекспір", price: 664, image: "classic/3_208_22.webp", rating: 4.6 },
                    { title: "Одіссея", author: "Гомер", price: 713, image: "classic/img_49640.jpg", rating: 4.8 },
                    { title: "Іліада", author: "Гомер", price: 759, image: "classic/img_49643.webp", rating: 4.9 }
                ],
                ukrainian: [
                    { "title": "Кобзар", "author": "Тарас Шевченко", "price": 547, "image": "ua/img_12076.webp", "rating": 4.9 },
                    { "title": "Тіні забутих предків", "author": "Михайло Коцюбинський", "price": 482, "image": "ua/174_1_1_1.jpg", "rating": 2.4 },
                    { "title": "Лісова пісня", "author": "Леся Українка", "price": 563, "image": "ua/cover_858_1.jpg", "rating": 4.7 },
                    { "title": "Захар Беркут", "author": "Іван Франко", "price": 609, "image": "ua/img314_1_6.webp", "rating": 3.5 },
                    { "title": "Енеїда", "author": "Іван Котляревський", "price": 551, "image": "ua/_3__1_11.jpg", "rating": 4.6 },
                    { "title": "Хіба ревуть воли, як ясла повні?", "author": "Панас Мирний", "price": 597, "image": "ua/img651_3_51.jpg", "rating": 2.5 },
                    { "title": "Кайдашева сім'я", "author": "Іван Нечуй-Левицький", "price": 523, "image": "ua/img518_48.webp", "rating": 2.4 },
                    { "title": "Оповідання", "author": "Ольга Кобилянська", "price": 618, "image": "ua/opko-800x800.jpg", "rating": 4.6 },
                    { "title": "Тигролови", "author": "Іван Багряний", "price": 664, "image": "ua/tigro.jpg", "rating": 4.7 },
                    { "title": "Чорна рада", "author": "Пантелеймон Куліш", "price": 602, "image": "ua/img291_49.jpg", "rating": 3.5 },
                    { "title": "Земля", "author": "Ольга Кобилянська", "price": 559, "image": "ua/img_101700.webp", "rating": 4.5 },
                    { "title": "Місто", "author": "Валер'ян Підмогильний", "price": 629, "image": "ua/index_10_10.webp", "rating": 4.7 },
                    { "title": "Жовтий князь", "author": "Василь Барка", "price": 677, "image": "ua/348_1_2.jpg", "rating": 4.6 },
                    { "title": "На Краю Часу", "author": "Улас Самчук", "price": 701, "image": "ua/cover_14_197.webp", "rating": 4.8 },
                    { "title": "Марія", "author": "Улас Самчук", "price": 749, "image": "ua/354_1_1.jpg", "rating": 4.9 },
                    { "title": "Чорний ворон", "author": "Василь Шкляр", "price": 603, "image": "ua/50224_86854.jpg", "rating": 4.7 },
                    { "title": "Залишенець", "author": "Панас Мирний", "price": 651, "image": "ua/knyha-zalyshenets.-chornyi-voron-vasyl-shkliar-21771793332403.jpg", "rating": 4.6 },
                    { "title": "Гуси-лебеді летять", "author": "Михайло Стельмах", "price": 712, "image": "ua/screenshot_2_1_45.jpg", "rating": 4.8 }
                ],
                novels: [
                    { "title": "Кривавий Меридіан", "author": "Кормак Маккарті", "price": 823, "image": "novels/122_1_6.jpg", "rating": 4.5 },
                    { "title": "Дорога", "author": "Кормак Маккарті", "price": 759, "image": "novels/screenshot_1_8_97.jpg", "rating": 4.6 },
                    { "title": "Старий і море", "author": "Ернест Хемінгуей", "price": 548, "image": "novels/img010_1_38.webp", "rating": 2.7 },
                    { "title": "Сто років самотності", "author": "Габріель Гарсія Маркес", "price": 734, "image": "novels/192_1_3.jpg", "rating": 4.8 },
                    { "title": "Любов під час холери", author: "Габріель Гарсія Маркес", price: 669, image: "novels/img_85918.jpg", rating: 4.6 },
                    { "title": "Над прірвою в житі", author: "Джером Д. Селінджер", price: 592, image: "novels/17254642.jpg", "rating": 2.5 },
                    { "title": "451 градус за Фаренгейтом", "author": "Рей Бредбері", "price": 650, image: "novels/img034_8.webp", "rating": 4.7 },
                    { "title": "Мобі Дік", "author": "Герман Мелвілл", "price": 850, "image": "novels/323094_5164659.webp", "rating": 4.6 },
                    { "title": "Убити пересмішника", "author": "Гарпер Лі", "price": 700, "image": "novels/wbfmksgwaj4.webp", "rating": 4.8 },
                    { "title": "Великий Гетсбі", "author": "Френсіс Скотт Фіцджеральд", "price": 600, "image": "novels/63507_127380.jpg", "rating": 4.5 },
                    { "title": "Смерть Івана Ілліча", "author": "Лев Толстой", "price": 700, "image": "novels/Смерть-Івана-Ілліча.jpeg", "rating": 4.8 },
                    { "title": "200 гривень...", "author": "Ліна Діксонй", "price": 600, "image": "novels/1722417441_75.png", "rating": 4.5 },
                    { "title": "Метаморфоза", "author": "Франц Кафка", "price": 700, "image": "novels/963b9f08b1fa58196947b243f810ec67054a204c_original.jpeg", "rating": 4.8 },
                    { "title": "Серце пітьми", "author": "Джозеф Конрад", "price": 600, "image": "novels/img004_20.jpg", "rating": 4.5 },
                    { "title": "Портрет Доріана Грея", "author": "Оскар Вайлд", "price": 700, "image": "novels/portret.webp", "rating": 4.8 },
                    { "title": "Дім духів", "author": "Ізабель Альєнде", "price": 600, "image": "novels/Дом_духов_.jpg", "rating": 4.5 }
                ],
            };

            
            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            function saveCart() {
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCart();
            }

            window.addToCart = (bookName, price) => {
                const existingItem = cart.find(item => item.name === bookName);
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({ name: bookName, price, quantity: 1 });
                }
                saveCart();
                const cartCounter = document.getElementById('cart-counter');
                const cartButton = document.getElementById('cart');
                cartCounter.classList.add('animate-pulse');
                cartButton.classList.add('shake-cart');
                setTimeout(() => {
                    cartCounter.classList.remove('animate-pulse');
                    cartButton.classList.remove('shake-cart');
                }, 500);
            };

            function removeFromCart(index) {
                cart.splice(index, 1);
                saveCart();
            }
            window.removeFromCart = removeFromCart;

            function updateCart() {
                const cartItems = document.getElementById('cart-items');
                const cartTotal = document.getElementById('cart-total');
                const cartCounter = document.getElementById('cart-counter');

                if (!cartItems || !cartTotal || !cartCounter) return; 

                cartItems.innerHTML = '';
                let total = 0;

                cart.forEach((item, index) => {
                    total += item.price * item.quantity;
                    const itemElement = document.createElement('div');
                    itemElement.className = 'flex items-center gap-4 p-4 rounded-xl shadow-sm border border-gray-100 bg-gradient-to-r from-white to-yellow-50';
                    itemElement.innerHTML = `
                        <div class="flex-1">
                            <p class="font-semibold text-[var(--text)] text-base">${item.name}</p>
                            <p class="text-sm text-gray-500">${item.price} ₴ <span class="mx-1">×</span> ${item.quantity}</p>
                        </div>
                        <button onclick="removeFromCart(${index})" class="ml-2 px-3 py-1 rounded-md bg-red-50 text-red-500 hover:bg-red-100 transition text-xs font-semibold flex items-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                            Видалити
                        </button>
                    `;
                    cartItems.appendChild(itemElement);
                });

                cartTotal.textContent = `${total} ₴`;
                cartCounter.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
            }

            
            document.getElementById('cart').addEventListener('click', () => {
                const modal = document.getElementById('cart-modal');
                modal.classList.remove('hidden');
                modal.classList.add('show');
                updateCart();
            });

            document.getElementById('close-cart').addEventListener('click', () => {
                const modal = document.getElementById('cart-modal');
                modal.classList.remove('show');
                setTimeout(() => modal.classList.add('hidden'), 300);
            });

            document.getElementById('clear-cart').addEventListener('click', () => {
                cart = [];
                saveCart();
            });

            
            document.getElementById('order-btn').addEventListener('click', () => {
                document.getElementById('checkout-modal').classList.remove('hidden');
                document.getElementById('checkout-modal').classList.add('show');
            });

            
            document.getElementById('close-form').addEventListener('click', () => {
                const modal = document.getElementById('checkout-modal');
                modal.classList.remove('show');
                setTimeout(() => modal.classList.add('hidden'), 300);
            });

            
            document.getElementById('checkout-modal').addEventListener('click', (e) => {
                if (e.target === document.getElementById('checkout-modal')) {
                    document.getElementById('checkout-modal').classList.remove('show');
                    setTimeout(() => document.getElementById('checkout-modal').classList.add('hidden'), 300);
                }
            });

            
            document.querySelectorAll('[data-modal]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const modalType = link.getAttribute('data-modal');
                    const modalData = modalContent[modalType];
                    if (modalData) {
                        document.getElementById('info-modal-title').textContent = modalData.title;
                        document.getElementById('info-modal-content').innerHTML = modalData.content;
                        const modal = document.getElementById('info-modal');
                        modal.classList.remove('hidden');
                        modal.classList.add('show');
                    }
                });
            });

            document.getElementById('close-info-modal').addEventListener('click', () => {
                const modal = document.getElementById('info-modal');
                modal.classList.remove('show');
                setTimeout(() => modal.classList.add('hidden'), 300);
            });

           
            document.getElementById('menu-toggle').addEventListener('click', () => {
                const mobileMenu = document.getElementById('mobile-menu');
                mobileMenu.classList.toggle('hidden');
                mobileMenu.classList.toggle('open');
                mobileMenu.setAttribute('aria-expanded', mobileMenu.classList.contains('open'));
            });

           
            function searchBooks(query) {
                const genreGrid = document.getElementById('genre-grid');
                genreGrid.innerHTML = '';
                Object.keys(booksByGenre).forEach(genre => {
                    booksByGenre[genre].forEach(book => {
                        if (book.title.toLowerCase().includes(query.toLowerCase())) {
                            const bookCard = document.createElement('div');
                            bookCard.className = 'book-card p-6';
                            bookCard.setAttribute('data-aos', 'fade-up');
                            bookCard.innerHTML = `
                                <img src="${book.image}" alt="Обкладинка книги ${book.title}" class="w-full h-64 object-cover rounded-md mb-4" loading="lazy">
                                <h3 class="text-xl font-semibold text-[var(--text)]">${book.title}</h3>
                                <p class="text-base text-gray-600">${book.author}</p>
                                <div class="flex items-center my-2">
                                    ${'<svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>'.repeat(Math.floor(book.rating))}
                                    ${'<svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>'.repeat(5 - Math.floor(book.rating))}
                                </div>
                                <p class="text-lg font-bold text-[var(--primary)]">${book.price} ₴</p>
                                <button onclick="addToCart('${book.title}', ${book.price})" class="btn w-full py-3 mt-auto">Додати до кошика</button>
                            `;
                            genreGrid.appendChild(bookCard);
                        }
                    });
                });
                feather.replace();
            }

            document.getElementById('search-bar').addEventListener('input', (e) => {
                searchBooks(e.target.value);
            });

            document.getElementById('mobile-search-bar').addEventListener('input', (e) => {
                searchBooks(e.target.value);
            });

           
            const genreGrid = document.getElementById('genre-grid');
            const genreButtons = document.querySelectorAll('.genre-button');

            function displayBooks(genre) {
                const genreGrid = document.getElementById('genre-grid');
                genreGrid.innerHTML = '';
                let booksToDisplay = [];

                if (genre === 'all') {
                    Object.keys(booksByGenre).forEach(genreKey => {
                        booksToDisplay = booksToDisplay.concat(booksByGenre[genreKey]);
                    });
                } else {
                    booksToDisplay = booksByGenre[genre];
                }

                // Удалена фильтрация по рейтингу
                let filteredBooks = booksToDisplay.filter(book => {
                    const price = parseInt(document.getElementById('price-filter').value);
                    return book.price <= price;
                });

                filteredBooks.forEach(book => {
                    const bookCard = document.createElement('div');
                    bookCard.className = 'book-card p-6 flex flex-col';
                    bookCard.setAttribute('data-aos', 'fade-up');
                    bookCard.innerHTML = `
                        <img src="${book.image}" alt="Обкладинка книги ${book.title}" class="w-full h-64 object-cover rounded-md mb-4" loading="lazy">
                        <h3 class="text-xl font-semibold text-[var(--text)]">${book.title}</h3>
                        <p class="text-base text-gray-600">${book.author}</p>
                        <div class="flex items-center my-2">
                            ${'<svg data-feather="star" class="w-4 h-4 text-yellow-400"></svg>'.repeat(Math.floor(book.rating))}
                            ${'<svg data-feather="star" class="w-4 h-4 text-gray-300"></svg>'.repeat(5 - Math.floor(book.rating))}
                        </div>
                        <p class="text-lg font-bold text-[var(--primary)]">${book.price} ₴</p>
                        <button onclick="addToCart('${book.title}', ${book.price})" class="btn w-full py-3 mt-auto">Додати до кошика</button>
                    `;
                    genreGrid.appendChild(bookCard);
                });
                feather.replace();
            }

            function filterBooks() {
                const activeButton = document.querySelector('.genre-button.active');
                if (activeButton) {
                    const genre = activeButton.getAttribute('data-genre');
                    displayBooks(genre);
                }
                const priceValue = document.getElementById('price-filter').value;
                document.getElementById('price-value').textContent = priceValue;
            }

            genreButtons.forEach(button => {
                button.addEventListener('click', () => {
                    genreButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    const genre = button.getAttribute('data-genre');
                    displayBooks(genre);
                });
            });

            displayBooks('all');

            document.getElementById('price-filter').addEventListener('input', () => {
                filterBooks();
            });

            document.getElementById('toggle-filters').addEventListener('click', () => {
                const sidebar = document.getElementById('filter-sidebar');
                sidebar.classList.toggle('open');
            });

            updateCart();
        });
    </script>

    <div id="account-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-40 modal" role="dialog" aria-labelledby="account-modal-title">
        <div class="bg-white rounded-[16px] p-8 w-full max-w-2xl modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 id="account-modal-title" class="text-2xl font-bold text-[var(--text)]">Особистий кабінет</h2>
                <button type="button" id="close-account-modal" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-4">
                    <h3 class="text-xl font-semibold text-[var(--text)]">Особиста інформація</h3>
                    <div id="user-info" class="space-y-2">
                        <p><strong>Ім'я:</strong> <span id="account-name"></span></p>
                        <p><strong>Email:</strong> <span id="account-email"></span></p>
                        <p><strong>Дата реєстрації:</strong> <span id="account-created"></span></p>
                    </div>
                    <button id="edit-profile" class="btn bg-[var(--primary)] text-white hover:bg-[var(--secondary)] w-full mt-4">
                        Редагувати профіль
                    </button>
                </div>
                <div class="space-y-4">
                    <h3 class="text-xl font-semibold text-[var(--text)]">Мої замовлення</h3>
                    <div id="orders-list" class="space-y-4 max-h-96 overflow-y-auto">
                    </div>
                </div>
            </div>
        </div>
    </div>

 
    <div id="edit-profile-modal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center hidden z-50 modal">
        <div class="bg-white rounded-[16px] p-8 w-full max-w-md modal-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-[var(--text)]">Редагувати профіль</h2>
                <button type="button" id="close-edit-profile-modal" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <form id="edit-profile-form" class="space-y-4">
                <div class="space-y-2">
                    <label for="edit-name" class="block text-sm font-medium text-gray-700">Ім'я</label>
                    <input type="text" id="edit-name" name="name" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent" required>
                </div>
                <div class="space-y-2">
                    <label for="edit-email" class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="edit-email" name="email" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent" required disabled>
                </div>
                <div class="pt-4">
                    <button type="submit" class="w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-[var(--primary)] hover:bg-[var(--secondary)] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[var(--primary)]">
                        Зберегти зміни
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
      async function submitOrder() {
        const form = document.querySelector('#checkout-modal form');
        if (!form) return;

        const formData = new FormData(form);
        const name = formData.get('name');
        const phone = formData.get('phone');
        const email = formData.get('email');
        const address = formData.get('address');

        let cart = [];
        try {
          cart = JSON.parse(localStorage.getItem('cart')) || [];
        } catch (e) {
          cart = [];
        }
        if (!cart.length) {
          toastSystem.error("Помилка", "Кошик порожній");
          return;
        }

        const order_id = "ORD" + Date.now();
        const orders = cart.map(item => ({
          name: item.name,
          units: item.quantity,
          price: item.price
        }));
        const shipping = 50;
        const total = orders.reduce((sum, item) => sum + item.units * item.price, 0) + shipping;

        
        const order_list = orders.map(item => 
          `${item.name} — ${item.units} шт. × ${item.price}₴ = ${item.units * item.price}₴`
        ).join('\n');
        const order_total = `${total}₴ (з доставкою)`;

        const emailData = {
          order_id,
          orders: JSON.stringify(orders),
          cost: JSON.stringify({
            shipping,
            tax: 0,
            total
          }),
          email,
          name,
          phone,
          address,
          order_list,   
          order_total   
        };
        const service_id = "service_yiyoxcd";
        const template_id = "template_71pz61n";
        const user_id = "wvpQ8lhJvxdzsGLhO";

        try {
          const response = await fetch("https://api.emailjs.com/api/v1.0/email/send", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              service_id,
              template_id,
              user_id,
              template_params: emailData
            })
          });

          if (response.ok) {
            toastSystem.success("Замовлення оформлено", "Підтвердження надіслано на email");
            localStorage.removeItem('cart');
            document.getElementById('checkout-modal').classList.remove('show');
            setTimeout(() => document.getElementById('checkout-modal').classList.add('hidden'), 300);
            if (typeof updateCart === 'function') updateCart();
          } else {
            const errorText = await response.text();
            toastSystem.error("Помилка надсилання", errorText || "Спробуйте ще раз");
          }
        } catch (error) {
          toastSystem.error("Помилка надсилання", error.message || "Спробуйте ще раз");
        }
      }
    </script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('a[href="#genres"]').forEach(link => {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.getElementById('genres') || document.querySelector('.genre-section');
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && mobileMenu.classList.contains('open')) {
              mobileMenu.classList.remove('open');
              setTimeout(() => mobileMenu.classList.add('hidden'), 300);
            }
          });
        });

        // Плавний скролл к секції "Акційні книги" при клике на "Акції"
        document.querySelectorAll('a[href="#discounts"]').forEach(link => {
          link.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.getElementById('discounts');
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            const mobileMenu = document.getElementById('mobile-menu');
            if (mobileMenu && mobileMenu.classList.contains('open')) {
              mobileMenu.classList.remove('open');
              setTimeout(() => mobileMenu.classList.add('hidden'), 300);
            }
          });
        });

        // Плавний скролл к шапке профиля при клике на логотип
        const logoLink = document.getElementById('logo-link');
        if (logoLink) {
          logoLink.addEventListener('click', function(e) {
            e.preventDefault();
            const header = document.querySelector('header');
            if (header) {
              header.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
          });
        }
      });
    </script>
</body>
</html>
